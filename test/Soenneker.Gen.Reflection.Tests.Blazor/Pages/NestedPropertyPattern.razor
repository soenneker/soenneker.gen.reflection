@page "/nested-property-pattern"
@rendermode InteractiveWebAssembly

<PageTitle>Nested Property Pattern Test</PageTitle>

<h1>Nested Property Pattern Test</h1>

<button class="btn btn-primary" @onclick="TestNestedPropertyPattern">Test Nested Property Pattern</button>

@code {
    private class ContainerObject
    {
        public ExternalSourceDto NestedSource { get; set; } = new ExternalSourceDto { Id = "nested-123" };
        public ExternalProjectDto NestedProject { get; set; } = new ExternalProjectDto { Id = "nested-project" };
    }

    private ContainerObject _container = new ContainerObject();

    private void TestNestedPropertyPattern()
    {
        // Pattern: Adapt calls on nested object properties
        var adaptedNested = _container.NestedSource.Adapt<ExternalDestDto>();
        
        // Pattern: Adapt calls on nested properties with different types
        var adaptedProject = _container.NestedProject.Adapt<ExternalDestDto>();
        
        // Pattern: Adapt calls in property access chains
        var propertyChainAdapted = GetContainer().NestedSource.Adapt<ExternalDestDto>();
    }
    
    private ContainerObject GetContainer()
    {
        return _container;
    }
}
